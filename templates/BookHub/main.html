{% extends "base.html" %}

{% load static %}

{% block content %}

    <div class="main_content" style ="margin: 100px;">

    <p>Ваши книги</p>

   

    {% for book_user in user_books %}
       
    <style>
        /* Стили для PDF, когда он в обычном режиме */
        .pdf-container {
            margin: 300px;
            position: relative;
            width: 100%%;
            height: 600px;
        }

        .total_div{
            margin: 300px;
            position: block;
            width: 100%%;
            height: 600px;
        
        }
        iframe {
            width: 100%;
            height: 700px;
        }

        /* Стиль для кнопки полноэкранного режима */
        .fullscreen-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 5px;
            background-color:black;
            color: white;
            border: none;
            cursor: pointer;
            font-size: 16px;
            z-index: 100;
        }

        /* Полноэкранный режим */
        .fullscreen iframe {
            width: 100vw;
            height: 100vh;
        }
    </style>

        
        <div class = "total_div">
            <p>asdadasdadsas</p>
        <div class="pdf-container" id="pdf-container">
            
            <iframe id="pdf-iframe" src="http://127.0.0.1:8000/media/{{ book_user }}" ></iframe>
            <button class="fullscreen-btn" onclick="toggleFullScreen()">Развернуть на весь экран</button>
        </div>
    </div>


{% endfor %}


    <form action="" method = 'POST' enctype="multipart/form-data">
        {% csrf_token %}  
        {{form}}
        {% comment %} <input type="file" name="pdf_file" accept=".pdf"> {% endcomment %}
        <button type="submit">Upload</button> 

    </form>

</div>

<script>
    function toggleFullScreen() {
        const container = document.getElementById('pdf-container');
        
        // Проверка, находится ли контейнер уже в полноэкранном режиме
        if (!document.fullscreenElement) {
            // Включаем полноэкранный режим
            if (container.requestFullscreen) {
                container.requestFullscreen();
            } else if (container.mozRequestFullScreen) { // Firefox
                container.mozRequestFullScreen();
            } else if (container.webkitRequestFullscreen) { // Chrome, Safari
                container.webkitRequestFullscreen();
            } else if (container.msRequestFullscreen) { // IE/Edge
                container.msRequestFullscreen();
            }
            // Изменяем класс контейнера для применения стилей полноэкранного режима
            container.classList.add('fullscreen');
        } else {
            // Выход из полноэкранного режима
            if (document.exitFullscreen) {
                document.exitFullscreen();
            } else if (document.mozCancelFullScreen) { // Firefox
                document.mozCancelFullScreen();
            } else if (document.webkitExitFullscreen) { // Chrome, Safari
                document.webkitExitFullscreen();
            } else if (document.msExitFullscreen) { // IE/Edge
                document.msExitFullscreen();
            }
            // Убираем стиль полноэкранного режима
            container.classList.remove('fullscreen');
        }
    }
</script>
{% endblock content %}