{% extends "base.html" %}

{% load static %}

{% block content %}

    <div class="main">

    <p>Ваши книги</p>

   
<div class="container text-center">
    <div class="row row-cols-2">
        
    {% for book_user in user_books %}

   
          <div class="col">
            <div class="pdf-container" id="pdf-container-{{forloop.counter}}">
                <iframe id="pdf-iframe-{{forloop.counter}}" class="fullscreen" src="http://127.0.0.1:8000/media/{{ book_user }}" ></iframe>
                <button class="fullscreen-btn" onclick="toggleFullScreen('pdf-container-{{ forloop.counter }}')">Развернуть на весь экран</button>
            </div>
          </div>

    {% endfor %}
    </div>
</div>

        



    <form action="" method = 'POST' enctype="multipart/form-data">
        {% csrf_token %}  
        {{form}}
        {% comment %} <input type="file" name="pdf_file" accept=".pdf"> {% endcomment %}
        <button type="submit">Upload</button> 

    </form>


    <nav aria-label="...">
        <ul class="pagination justify-content-center">

          <li class="page-item {% if not user_books.has_previous %} disabled {% endif %}" aria-current="page">
            <a class = "page-link" href="{% if user_books.has_previous %}?page={{user_books.previous_page_number}}{% else %}#{% endif %}">Previous</a>
          </li>

        

          {% for i in page_range %}
            <li class="page-item {% if user_books.number == i %} active {% endif %}"><a class="page-link" href="?page={{i}}">{{i}}</a></li> </li>
          {% endfor %}
          
          <li class="page-item {% if not user_books.has_next %} disabled {% endif %}" aria-current="page">
            <a class="page-link" href="{% if user_books.has_next %}?page={{user_books.next_page_number}}{% else %}#{% endif %}">Next</a>
         </li>
          
        </ul>
      </nav>


</div>

<script>
    function toggleFullScreen(containerId) {
        const container = document.getElementById(containerId);
        // Проверка, находится ли контейнер уже в полноэкранном режиме
        if (!document.fullscreenElement) {
            // Включаем полноэкранный режим
            if (container.requestFullscreen) {
                container.requestFullscreen();
            } else if (container.mozRequestFullScreen) { // Firefox
                container.mozRequestFullScreen();
            } else if (container.webkitRequestFullscreen) { // Chrome, Safari
                container.webkitRequestFullscreen();
            } else if (container.msRequestFullscreen) { // IE/Edge
                container.msRequestFullscreen();
            }
            // Изменяем класс контейнера для применения стилей полноэкранного режима
            container.classList.add('fullscreen');
        } else {
            // Выход из полноэкранного режима
            if (document.exitFullscreen) {
                document.exitFullscreen();
            } else if (document.mozCancelFullScreen) { // Firefox
                document.mozCancelFullScreen();
            } else if (document.webkitExitFullscreen) { // Chrome, Safari
                document.webkitExitFullscreen();
            } else if (document.msExitFullscreen) { // IE/Edge
                document.msExitFullscreen();
            }
            // Убираем стиль полноэкранного режима
            container.classList.remove('fullscreen');
        }
    }
</script>
{% endblock content %}